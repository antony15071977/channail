

tinymce.PluginManager.add('ag_gaw', function(editor, url) {
  // Add a button that opens a window
  
var agww = document.body.clientWidth;
var agwh = $(window).height();

if (agww < 1000) {
	   agww = agww*90/100;
	   agwh = agwh*80/100;
} else {
	   agww = agww*50/100;
	   agwh = agwh*50/100;
}
  
  editor.addButton('ag_gaw', {
    text: ' ',
    icon: ' icon-shopping-bag',
	title: 'Кнопки виртуальных витрин',
    onclick: function() {
      // Open window
      editor.windowManager.open({
		
	   
        
       
		width: agww,
        height: agwh,
		
         title: 'Кнопки виртуальных витрин',
        body: [
		
          {type: 'textbox', name: 'url', label: 'Адрес:'},
		  
		  {type: 'textbox', name: 'title', label: 'Текст:'},
	  
	      {name:"icon",type:"listbox",label:"Значёк ",values:([
		  {text:"Google Play",value:'icon-googleplay'},
		  {text:"Android",value:'icon-android-1'},
		  {text:"Apple Store",value:'icon-apple'},
		  {text:"iTunes",value:'icon-itunes'},
		  {text:"Microsoft Store",value:'icon-windows-1'},
		  {text:"Amazon",value:'icon-amazon'}
		  ])},
		  
	      {name:"target",type:"listbox",label:"Режим перехода",values:([{text:"None",value:""},{text:"New window",value:' target="_blank"'}])}
		 
		  
        ],
        onsubmit: function(e) {
          // Insert content when the window form is submitted
		  var name_btn = '&nbsp;';
		  if (e.data.icon) {
			 if (e.data.icon == 'icon-googleplay') {name_btn = 'Google Play';}
             if (e.data.icon == 'icon-android-1') {name_btn = 'Android';} 
             if (e.data.icon == 'icon-apple') {name_btn = 'Apple Store';} 
			 if (e.data.icon == 'icon-itunes') {name_btn = 'iTunes';} 
             if (e.data.icon == 'icon-windows-1') {name_btn = 'Microsoft Store';}
             if (e.data.icon == 'icon-amazon') {name_btn = 'Amazon';}				 
		  }
		  
         editor.insertContent('<p><a href="' + e.data.url + '"' + e.data.target + ' class="ag_button_store"><span class="ag_icon_store ' + e.data.icon + '">&nbsp;</span><span class="ag_text_store"><span class="ag_ctext_store">' + e.data.title + '</span><span class="ag_title_store">' + name_btn + '</span></span><span class="ag_clear"></span></a></p>');
        }
		
      });
    }
  });

  // Adds a menu item to the tools menu
  
});