

tinymce.PluginManager.add('inbutton', function(editor, url) {
  // Add a button that opens a window
  
var agww = document.body.clientWidth;
var agwh = $(window).height();
	   agww = agww*90/100;
	   agwh = agwh*80/100;
  
  editor.addButton('inbutton', {
    text: 'Кнопка',
    icon: false,
    onclick: function() {
      // Open window
      editor.windowManager.open({
		
	   
        
       
		width: agww,
        height: agwh,
		
         title: 'Вставить кнопку',
        body: [
          {type: 'filepicker', name: 'url', label: 'Адрес перехода или файл:'},
		  {type: 'textbox', name: 'title', label: 'Текст на кнопке:'},
	  
	      {name:"target",type:"listbox",label:"Target",values:([{text:"None",value:""},{text:"New window",value:"_blank"}])}
		 
		  
        ],
        onsubmit: function(e) {
          // Insert content when the window form is submitted
          editor.insertContent('<div class="target_button"><a href="' + e.data.url + '" target="' + e.data.target + '">' + e.data.title + '</a></div>');
        }
		
      });
    }
  });

  // Adds a menu item to the tools menu
  
});